üîπ –ß—Ç–æ —Ç–∞–∫–æ–µ Stack (—Å—Ç–µ–∫)?

–°—Ç–µ–∫ ‚Äî —ç—Ç–æ –æ–±–ª–∞—Å—Ç—å –ø–∞–º—è—Ç–∏, –≥–¥–µ —Ö—Ä–∞–Ω—è—Ç—Å—è:

    –õ–æ–∫–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ

    –°—Å—ã–ª–∫–∏ –Ω–∞ –æ–±—ä–µ–∫—Ç—ã

    –í—ã–∑–æ–≤—ã –º–µ—Ç–æ–¥–æ–≤ (–∫–∞–∂–¥—ã–π –º–µ—Ç–æ–¥ = –æ–¥–∏–Ω —Å—Ç–µ–∫-—Ñ—Ä–µ–π–º)

    –í—Ä–µ–º—è –∂–∏–∑–Ω–∏ ‚Äî –¥–æ –≤—ã—Ö–æ–¥–∞ –∏–∑ –º–µ—Ç–æ–¥–∞

üì¶ –ü—Ä–∏–º–µ—Ä:

void foo() {
    int x = 10; // x –∂–∏–≤—ë—Ç –≤ —Å—Ç–µ–∫–µ
    String name = "Tom"; // —Å—Å—ã–ª–∫–∞ –≤ —Å—Ç–µ–∫–µ ‚Üí —Å–∞–º –æ–±—ä–µ–∫—Ç –≤ –∫—É—á–µ
}

‚öôÔ∏è –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:

    –ë—ã—Å—Ç—Ä—ã–π –¥–æ—Å—Ç—É–ø (LIFO ‚Äî last in, first out)

    –û—Å–≤–æ–±–æ–∂–¥–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ –º–µ—Ç–æ–¥–∞

    –†–∞–∑–º–µ—Ä –æ–≥—Ä–∞–Ω–∏—á–µ–Ω ‚Üí –º–æ–∂–µ—Ç –ø—Ä–æ–∏–∑–æ–π—Ç–∏ StackOverflowError –ø—Ä–∏ –≥–ª—É–±–æ–∫–æ–π —Ä–µ–∫—É—Ä—Å–∏–∏

üîπ –ß—Ç–æ —Ç–∞–∫–æ–µ Heap (–∫—É—á–∞)?

–ö—É—á–∞ ‚Äî —ç—Ç–æ –æ–±–ª–∞—Å—Ç—å –ø–∞–º—è—Ç–∏, –≥–¥–µ —Ö—Ä–∞–Ω—è—Ç—Å—è:

    –í—Å–µ –æ–±—ä–µ–∫—Ç—ã (new) –∏ –∏—Ö –¥–∞–Ω–Ω—ã–µ (–≤–∫–ª—é—á–∞—è –ø–æ–ª—è)

    –î–∞–Ω–Ω—ã–µ –∂–∏–≤—É—Ç, –ø–æ–∫–∞ –µ—Å—Ç—å —Å—Å—ã–ª–∫–∏ –Ω–∞ –Ω–∏—Ö

    –£–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —Å–±–æ—Ä—â–∏–∫–æ–º –º—É—Å–æ—Ä–∞ (GC)

üì¶ –ü—Ä–∏–º–µ—Ä:

Person p = new Person("Alice");

    –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è p (—Å—Å—ã–ª–∫–∞) ‚Äî –≤ —Å—Ç–µ–∫–µ

    –°–∞–º –æ–±—ä–µ–∫—Ç Person("Alice") ‚Äî –≤ –∫—É—á–µ

üîÑ –°—Ä–∞–≤–Ω–µ–Ω–∏–µ Stack vs Heap:
–•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞	    Stack	                                           Heap
–•—Ä–∞–Ω–∏—Ç	             –õ–æ–∫–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ, –≤—ã–∑–æ–≤—ã –º–µ—Ç–æ–¥–æ–≤	          –û–±—ä–µ–∫—Ç—ã –∏ –∏—Ö –¥–∞–Ω–Ω—ã–µ
–°–∫–æ—Ä–æ—Å—Ç—å –¥–æ—Å—Ç—É–ø–∞     –û—á–µ–Ω—å –±—ã—Å—Ç—Ä–∞—è	                                  –ú–µ–¥–ª–µ–Ω–Ω–µ–µ
–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ	     –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ (LIFO)	                          –ß–µ—Ä–µ–∑ GC (—Å–±–æ—Ä—â–∏–∫ –º—É—Å–æ—Ä–∞)
–û–±—ä—ë–º –ø–∞–º—è—Ç–∏	     –ú–∞–ª–µ–Ω—å–∫–∏–π (–æ–≥—Ä–∞–Ω–∏—á–µ–Ω)	                          –ë–æ–ª—å—à–æ–π
–û—à–∏–±–∫–∏	             StackOverflowError	                                  OutOfMemoryError
üîß –í–∏–∑—É–∞–ª—å–Ω—ã–π –ø—Ä–∏–º–µ—Ä:

public void method() {
    int a = 5;                      // –≤ —Å—Ç–µ–∫–µ
    String s = new String("Hi");   // —Å—Å—ã–ª–∫–∞ –≤ —Å—Ç–µ–∫–µ ‚Üí –æ–±—ä–µ–∫—Ç –≤ –∫—É—á–µ
}

üß† –ü–æ—á–µ–º—É —ç—Ç–æ –≤–∞–∂–Ω–æ –Ω–∞ —Å–æ–±–µ—Å–µ–¥–æ–≤–∞–Ω–∏–∏?

    –ß—Ç–æ–±—ã –æ–±—ä—è—Å–Ω–∏—Ç—å: –≥–¥–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏ –æ–±—ä–µ–∫—Ç—ã

    –ß—Ç–æ–±—ã –ø–æ–Ω–∏–º–∞—Ç—å, –∫–∞–∫ —Ä–∞–±–æ—Ç–∞—é—Ç —Å—Å—ã–ª–∫–∏, –ø–µ—Ä–µ–¥–∞—á–∞ –ø–æ –∑–Ω–∞—á–µ–Ω–∏—é

    –î–ª—è –∞–Ω–∞–ª–∏–∑–∞ —É—Ç–µ—á–µ–∫ –ø–∞–º—è—Ç–∏, GC, StackOverflowError

üí¨ –ß–∞—Å—Ç—ã–µ —Å–æ–±–µ—Å–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã –ø–æ —Ç–µ–º–µ:

    –ß—Ç–æ –±—É–¥–µ—Ç, –µ—Å–ª–∏ –º–µ—Ç–æ–¥ –≤—ã–∑—ã–≤–∞–µ—Ç —Å–∞–º —Å–µ–±—è —Å–ª–∏—à–∫–æ–º –≥–ª—É–±–æ–∫–æ? ‚Üí StackOverflowError

    –ú–æ–∂–Ω–æ –ª–∏ —É–ø—Ä–∞–≤–ª—è—Ç—å –ø–∞–º—è—Ç—å—é –≤ –∫—É—á–µ –≤—Ä—É—á–Ω—É—é? ‚Üí –ù–µ—Ç, —ç—Ç–æ –¥–µ–ª–∞–µ—Ç GC

    –ì–¥–µ —Ö—Ä–∞–Ω—è—Ç—Å—è static –ø–æ–ª—è? ‚Üí –í –º–µ—Ç–∞—Å–ø–µ–π—Å–µ (—Ä–∞–Ω—å—à–µ PermGen)

üîπ –ü—Ä–∏–º–µ—Ä:

String a = "AAAA";

‚ùì –ì–¥–µ –±—É–¥–µ—Ç —Ö—Ä–∞–Ω–∏—Ç—å—Å—è —Å—Ç—Ä–æ–∫–∞ "AAAA"?
‚úÖ –û—Ç–≤–µ—Ç:

–°—Ç—Ä–æ–∫–∞ "AAAA" –±—É–¥–µ—Ç —Ö—Ä–∞–Ω–∏—Ç—å—Å—è –≤ String Pool ‚Äî —ç—Ç–æ —Å–ø–µ—Ü–∏–∞–ª—å–Ω–∞—è –æ–±–ª–∞—Å—Ç—å –ø–∞–º—è—Ç–∏ –≤–Ω—É—Ç—Ä–∏ Heap (–∫—É—á–∏).
üîπ –ß—Ç–æ —Ç–∞–∫–æ–µ String Pool?

    –≠—Ç–æ —Ç–∞–±–ª–∏—Ü–∞ —Å—Ç—Ä–æ–∫–æ–≤—ã—Ö –ª–∏—Ç–µ—Ä–∞–ª–æ–≤, —Ö—Ä–∞–Ω—è—â–∏—Ö—Å—è –≤ –∫—É—á–µ (heap).

    –ö–æ–≥–¥–∞ —Ç—ã –ø–∏—à–µ—à—å —Å—Ç—Ä–æ–∫—É –∫–∞–∫ –ª–∏—Ç–µ—Ä–∞–ª (–Ω–∞–ø—Ä–∏–º–µ—Ä "AAAA"), JVM –ø—Ä–æ–≤–µ—Ä—è–µ—Ç, –µ—Å—Ç—å –ª–∏ —É–∂–µ —Ç–∞–∫–∞—è —Å—Ç—Ä–æ–∫–∞ –≤ –ø—É–ª–µ.

        –ï—Å–ª–∏ –µ—Å—Ç—å ‚Üí –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è —Å—Å—ã–ª–∫–∞ –Ω–∞ —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é —Å—Ç—Ä–æ–∫—É.

        –ï—Å–ª–∏ –Ω–µ—Ç ‚Üí —Å–æ–∑–¥–∞—ë—Ç—Å—è –Ω–æ–≤–∞—è —Å—Ç—Ä–æ–∫–∞ –≤ –ø—É–ª–µ.

üìå –ü—Ä–∏–º–µ—Ä:

String a = "AAAA";
String b = "AAAA";

System.out.println(a == b);      // true ‚Üí —Å—Å—ã–ª–∫–∏ –Ω–∞ –æ–¥–∏–Ω –æ–±—ä–µ–∫—Ç –∏–∑ String Pool
System.out.println(a.equals(b)); // true ‚Üí —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Å–æ–≤–ø–∞–¥–∞–µ—Ç

‚úÖ –û–±–∞ a –∏ b —É–∫–∞–∑—ã–≤–∞—é—Ç –Ω–∞ –æ–¥–∏–Ω –∏ —Ç–æ—Ç –∂–µ –æ–±—ä–µ–∫—Ç –≤ String Pool, –ø–æ—Ç–æ–º—É —á—Ç–æ —ç—Ç–æ –ª–∏—Ç–µ—Ä–∞–ª—ã.
üî∏ –ê –µ—Å–ª–∏ —Ç–∞–∫:

String a = new String("AAAA");

    –ó–¥–µ—Å—å —Å–æ–∑–¥–∞—é—Ç—Å—è –¥–≤–∞ –æ–±—ä–µ–∫—Ç–∞:

        "AAAA" –≤ String Pool

        –ù–æ–≤—ã–π –æ–±—ä–µ–∫—Ç String –≤ –∫—É—á–µ (heap), –∫–æ—Ç–æ—Ä—ã–π —Å–æ–¥–µ—Ä–∂–∏—Ç –∫–æ–ø–∏—é "AAAA"

String a = new String("AAAA");
String b = "AAAA";

System.out.println(a == b);      // false ‚Üí —Ä–∞–∑–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã
System.out.println(a.equals(b)); // true  ‚Üí –ø–æ —Å–æ–¥–µ—Ä–∂–∏–º–æ–º—É —Å–æ–≤–ø–∞–¥–∞—é—Ç

üîç –í–∏–∑—É–∞–ª—å–Ω–æ:
–ó–∞–ø–∏—Å—å	–ì–¥–µ —Ö—Ä–∞–Ω–∏—Ç—Å—è	–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π
String a = "AAAA";	–í String Pool (Heap)	–ü–æ–≤—Ç–æ—Ä–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å—Ç—Ä–æ–∫
String a = new String("AAAA");	–ù–æ–≤—ã–π –æ–±—ä–µ–∫—Ç –≤ –∫—É—á–µ, –∫–æ–ø–∏—è –∏–∑ –ø—É–ª–∞	== –¥–∞—Å—Ç false
üß† –í—ã–≤–æ–¥:

    "AAAA" (–ª–∏—Ç–µ—Ä–∞–ª) –≤—Å–µ–≥–¥–∞ –ø–æ–º–µ—â–∞–µ—Ç—Å—è –≤ String Pool

    String a = "AAAA"; ‚Äî —Å—Å—ã–ª–∫–∞ –Ω–∞ —Å—Ç—Ä–æ–∫—É –≤ –ø—É–ª–µ

    new String("AAAA") ‚Äî —Å–æ–∑–¥–∞—ë—Ç –Ω–æ–≤—ã–π –æ–±—ä–µ–∫—Ç –≤ –∫—É—á–µ, –¥–∞–∂–µ –µ—Å–ª–∏ "AAAA" —É–∂–µ –µ—Å—Ç—å –≤ –ø—É–ª–µ

    String Pool ‚Äî —á–∞—Å—Ç—å –∫—É—á–∏ (heap), –Ω–æ —É–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω–æ