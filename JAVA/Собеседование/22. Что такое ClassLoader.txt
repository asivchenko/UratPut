üîπ –ß—Ç–æ —Ç–∞–∫–æ–µ ClassLoader –≤ Java?

ClassLoader ‚Äî —ç—Ç–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç JVM, –∫–æ—Ç–æ—Ä—ã–π –∑–∞–≥—Ä—É–∂–∞–µ—Ç –∫–ª–∞—Å—Å—ã –≤ –ø–∞–º—è—Ç—å –∏–∑ —Ñ–∞–π–ª–æ–≤ .class, .jar, –∏–ª–∏ –¥–∞–∂–µ –∏–∑ —Å–µ—Ç–∏.
–û–Ω –ø—Ä–µ–≤—Ä–∞—â–∞–µ—Ç –±–∞–π—Ç-–∫–æ–¥ –≤ –∫–ª–∞—Å—Å—ã, –¥–æ—Å—Ç—É–ø–Ω—ã–µ JVM –≤–æ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è.

    üì¶ –ü—Ä–æ—â–µ –≥–æ–≤–æ—Ä—è: ClassLoader ‚Äî —ç—Ç–æ –º–µ—Ö–∞–Ω–∏–∑–º, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–¥—Å–æ–≤—ã–≤–∞–µ—Ç JVM –Ω—É–∂–Ω—ã–µ –∫–ª–∞—Å—Å—ã –≤ –Ω—É–∂–Ω—ã–π –º–æ–º–µ–Ω—Ç.

üîß –ß—Ç–æ –¥–µ–ª–∞–µ—Ç ClassLoader:

    –ù–∞—Ö–æ–¥–∏—Ç .class —Ñ–∞–π–ª (–ø–æ –∏–º–µ–Ω–∏ –∫–ª–∞—Å—Å–∞)

    –ó–∞–≥—Ä—É–∂–∞–µ—Ç –±–∞–π—Ç-–∫–æ–¥ –≤ –ø–∞–º—è—Ç—å

    –°–æ–∑–¥–∞—ë—Ç –æ–±—ä–µ–∫—Ç —Ç–∏–ø–∞ Class<?>

    JVM –Ω–∞—á–∏–Ω–∞–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —ç—Ç–æ—Ç –∫–ª–∞—Å—Å

üîπ –û—Å–Ω–æ–≤–Ω—ã–µ —Ç–∏–ø—ã ClassLoaders –≤ Java:
ClassLoader	–ó–∞–≥—Ä—É–∑–∫–∞ –∫–ª–∞—Å—Å–æ–≤
Bootstrap ClassLoader	–ó–∞–≥—Ä—É–∂–∞–µ—Ç –±–∞–∑–æ–≤—ã–µ –∫–ª–∞—Å—Å—ã Java (java.lang, java.util –∏ —Ç.–¥.) ‚Äî –∏–∑ rt.jar
Extension ClassLoader	–ó–∞–≥—Ä—É–∂–∞–µ—Ç –∫–ª–∞—Å—Å—ã –∏–∑ lib/ext (—Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è JVM)
System (Application) ClassLoader	–ó–∞–≥—Ä—É–∂–∞–µ—Ç –∫–ª–∞—Å—Å—ã –∏–∑ classpath (–≤–∞—à–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ)
Custom ClassLoader	–í—ã –º–æ–∂–µ—Ç–µ —Å–æ–∑–¥–∞—Ç—å —Å–≤–æ–π ClassLoader, –Ω–∞–ø—Ä–∏–º–µ—Ä –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –ø–ª–∞–≥–∏–Ω–æ–≤
üîç –ü—Ä–∏–º–µ—Ä: –∫–∞–∫ –ø–æ–ª—É—á–∏—Ç—å –∑–∞–≥—Ä—É–∑—á–∏–∫ –∫–ª–∞—Å—Å–∞

ClassLoader cl = MyClass.class.getClassLoader();
System.out.println(cl); // –Ω–∞–ø—Ä–∏–º–µ—Ä: sun.misc.Launcher$AppClassLoader

üîÑ –ò–µ—Ä–∞—Ä—Ö–∏—è (–¥–µ–ª–µ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–≤–µ—Ä—Ö—É –≤–Ω–∏–∑):

Bootstrap
   ‚Üì
Extension
   ‚Üì
System (App)
   ‚Üì
Custom

    –ü—Ä–∏ –≤—ã–∑–æ–≤–µ loadClass() –∫–∞–∂–¥—ã–π –∑–∞–≥—Ä—É–∑—á–∏–∫ —Å–Ω–∞—á–∞–ª–∞ –¥–µ–ª–µ–≥–∏—Ä—É–µ—Ç –∑–∞–≥—Ä—É–∑–∫—É —Ä–æ–¥–∏—Ç–µ–ª—é, –∏ —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ —Ä–æ–¥–∏—Ç–µ–ª—å –Ω–µ —Å–ø—Ä–∞–≤–∏–ª—Å—è ‚Äî –∑–∞–≥—Ä—É–∂–∞–µ—Ç —Å–∞–º.

üîß –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è?

    –ü—Ä–∏ –∑–∞–ø—É—Å–∫–µ –ª—é–±–æ–≥–æ Java-–∫–æ–¥–∞ (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)

    –ü—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∞–º–∏ (Spring, Tomcat, OSGi) ‚Äî –¥–ª—è –∏–∑–æ–ª—è—Ü–∏–∏ –º–æ–¥—É–ª–µ–π

    –ü—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –ø–ª–∞–≥–∏–Ω–æ–≤ –∏–ª–∏ –º–æ–¥—É–ª–µ–π –≤ —Ä–∞–Ω—Ç–∞–π–º–µ

    –ü—Ä–∏ –∞–Ω–∞–ª–∏–∑–µ –∫–ª–∞—Å—Å–æ–≤ —á–µ—Ä–µ–∑ Reflection –∏–ª–∏ Instrumentation

üß† –ò–Ω—Ç–µ—Ä–≤—å—é-–≤–æ–ø—Ä–æ—Å—ã –ø–æ —Ç–µ–º–µ:
–í–æ–ø—Ä–æ—Å	–ß—Ç–æ –Ω—É–∂–Ω–æ –∑–Ω–∞—Ç—å
–ß—Ç–æ –¥–µ–ª–∞–µ—Ç Class.forName("...")?	–ó–∞–≥—Ä—É–∂–∞–µ—Ç –∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç –∫–ª–∞—Å—Å
–ö–∞–∫ –∑–∞–≥—Ä—É–∑–∏—Ç—å –∫–ª–∞—Å—Å —Å –Ω–µ—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–≥–æ –ø—É—Ç–∏?	–ù–∞–ø–∏—Å–∞—Ç—å —Å–≤–æ–π ClassLoader
–ß—Ç–æ —Ç–∞–∫–æ–µ ContextClassLoader?	ClassLoader, –Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—ã–π —Ç–µ–∫—É—â–µ–º—É –ø–æ—Ç–æ–∫—É
–ü–æ—á–µ–º—É –º–æ–≥—É—Ç –≤–æ–∑–Ω–∏–∫–Ω—É—Ç—å ClassNotFoundException –∏–ª–∏ NoClassDefFoundError?	–†–∞–∑–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã –Ω–∞ —ç—Ç–∞–ø–µ –∑–∞–≥—Ä—É–∑–∫–∏/–∏—Å–ø–æ–ª–Ω–µ–Ω–∏—è
‚ö†Ô∏è –í–∞–∂–Ω–æ:

    ClassNotFoundException ‚Üí –∫–ª–∞—Å—Å –Ω–µ –Ω–∞–π–¥–µ–Ω –≤–æ –≤—Ä–µ–º—è –∑–∞–≥—Ä—É–∑–∫–∏

    NoClassDefFoundError ‚Üí –∫–ª–∞—Å—Å –±—ã–ª –Ω–∞–π–¥–µ–Ω, –Ω–æ —Ç–µ–ø–µ—Ä—å –Ω–µ –¥–æ—Å—Ç—É–ø–µ–Ω –ø—Ä–∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–π –ø–æ–ø—ã—Ç–∫–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ .jar –≤ —Ä–∞–Ω—Ç–∞–π–º–µ)