–ß—Ç–æ —Ç–∞–∫–æ–µ CURSOR? –†–∞–∑–Ω–∏—Ü–∞ –º–µ–∂–¥—É –Ω–µ—è–≤–Ω—ã–º –∏ —è–≤–Ω—ã–º –∫—É—Ä—Å–æ—Ä–æ–º?
ChatGPT —Å–∫–∞–∑–∞–ª:

–í Oracle CURSOR (–∫—É—Ä—Å–æ—Ä) ‚Äî —ç—Ç–æ –º–µ—Ö–∞–Ω–∏–∑–º –¥–ª—è –ø–æ—Å—Ç—Ä–æ—á–Ω–æ–≥–æ –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ SQL-–∑–∞–ø—Ä–æ—Å–∞ –≤–Ω—É—Ç—Ä–∏ PL/SQL. –¢–æ –µ—Å—Ç—å, –∫–æ–≥–¥–∞ SQL –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å—Ç—Ä–æ–∫, CURSOR –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–µ—Ä–µ–±–∏—Ä–∞—Ç—å —ç—Ç–∏ —Å—Ç—Ä–æ–∫–∏ –ø–æ –æ–¥–Ω–æ–π.
üìå –ß—Ç–æ —Ç–∞–∫–æ–µ CURSOR?

    –ö—É—Ä—Å–æ—Ä ‚Äî —ç—Ç–æ —É–∫–∞–∑–∞—Ç–µ–ª—å –Ω–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç SQL-–∑–∞–ø—Ä–æ—Å–∞ –≤ –ø–∞–º—è—Ç–∏, —Å –ø–æ–º–æ—â—å—é –∫–æ—Ç–æ—Ä–æ–≥–æ –º–æ–∂–Ω–æ —á–∏—Ç–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –ø–æ—Å—Ç—Ä–æ—á–Ω–æ –≤ PL/SQL-–±–ª–æ–∫–∞—Ö.

üîÑ –ó–∞—á–µ–º –Ω—É–∂–µ–Ω?

    –î–ª—è —Ü–∏–∫–ª–∏—á–µ—Å–∫–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å—Ç—Ä–æ–∫ –∏–∑ SELECT.

    –î–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –ø–æ—Å—Ç—Ä–æ—á–Ω–æ–π –ª–æ–≥–∏–∫–∏, –∫–æ—Ç–æ—Ä—É—é –Ω–µ–ª—å–∑—è —Å–¥–µ–ª–∞—Ç—å –≤ SQL –Ω–∞–ø—Ä—è–º—É—é.

    –ö–æ–≥–¥–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤—ã–±–æ—Ä–∫–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ IF, CASE, UPDATE, –≤—ã–∑–æ–≤–∞—Ö —Ñ—É–Ω–∫—Ü–∏–π –∏ —Ç.–ø.

üîç –í–∏–¥—ã –∫—É—Ä—Å–æ—Ä–æ–≤
–¢–∏–ø –∫—É—Ä—Å–æ—Ä–∞	–û–ø–∏—Å–∞–Ω–∏–µ
–ù–µ—è–≤–Ω—ã–π (implicit)	–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞—ë—Ç—Å—è –ø—Ä–∏ –æ–¥–∏–Ω–æ—á–Ω–æ–º SQL (SELECT INTO, INSERT, etc.)
–Ø–≤–Ω—ã–π (explicit)	–û–±—ä—è–≤–ª—è–µ—Ç—Å—è –≤—Ä—É—á–Ω—É—é –≤ PL/SQL –±–ª–æ–∫–µ
‚úÖ –ü—Ä–∏–º–µ—Ä: –ù–µ—è–≤–Ω—ã–π –∫—É—Ä—Å–æ—Ä

DECLARE
  v_name employees.first_name%TYPE;
BEGIN
  SELECT first_name INTO v_name
  FROM employees
  WHERE employee_id = 100;

  DBMS_OUTPUT.PUT_LINE(v_name);
END;

    –†–∞–±–æ—Ç–∞–µ—Ç, –µ—Å–ª–∏ SELECT –≤–µ—Ä–Ω—ë—Ç –æ–¥–Ω—É —Å—Ç—Ä–æ–∫—É.

    –û—à–∏–±–∫–∞, –µ—Å–ª–∏ 0 –∏–ª–∏ >1 —Å—Ç—Ä–æ–∫ (NO_DATA_FOUND, TOO_MANY_ROWS).

    –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è.

‚úÖ –ü—Ä–∏–º–µ—Ä: –Ø–≤–Ω—ã–π –∫—É—Ä—Å–æ—Ä

DECLARE
  CURSOR emp_cur IS
    SELECT employee_id, first_name FROM employees WHERE department_id = 10;

  v_id employees.employee_id%TYPE;
  v_name employees.first_name%TYPE;
BEGIN
  OPEN emp_cur;
  LOOP
    FETCH emp_cur INTO v_id, v_name;
    EXIT WHEN emp_cur%NOTFOUND;

    DBMS_OUTPUT.PUT_LINE(v_id || ' - ' || v_name);
  END LOOP;
  CLOSE emp_cur;
END;

    –ü–æ–ª–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å: –æ–±—ä—è–≤–∏–ª, –æ—Ç–∫—Ä—ã–ª, —á–∏—Ç–∞–ª, –∑–∞–∫—Ä—ã–ª

    –ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å %FOUND, %NOTFOUND, %ROWCOUNT, %ISOPEN

    –†–∞–±–æ—Ç–∞–µ—Ç –¥–ª—è –º–Ω–æ–≥–æ—Å—Ç—Ä–æ—á–Ω—ã—Ö –≤—ã–±–æ—Ä–æ–∫

üìã –°—Ä–∞–≤–Ω–µ–Ω–∏–µ: —è–≤–Ω—ã–π vs –Ω–µ—è–≤–Ω—ã–π
–•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞	–ù–µ—è–≤–Ω—ã–π –∫—É—Ä—Å–æ—Ä (SELECT INTO)	–Ø–≤–Ω—ã–π –∫—É—Ä—Å–æ—Ä (CURSOR IS ...)
–û–±—ä—è–≤–ª—è–µ—Ç—Å—è –≤—Ä—É—á–Ω—É—é	‚ùå	‚úÖ
–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å—Ç—Ä–æ–∫	‚ùå (—Ç–æ–ª—å–∫–æ 1 —Å—Ç—Ä–æ–∫–∞)	‚úÖ
–û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Å—Ç—Ä–æ–∫—É –∑–∞ —Å—Ç—Ä–æ–∫–æ–π	‚ùå	‚úÖ
–ü—Ä–æ—â–µ –ø–∏—Å–∞—Ç—å	‚úÖ	‚ùå (–±–æ–ª—å—à–µ –∫–æ–¥–∞)
–ì–∏–±–∫–æ—Å—Ç—å (–ª–æ–≥–∏–∫–∞ –≤–Ω—É—Ç—Ä–∏)	‚ùå	‚úÖ (—Ü–∏–∫–ª, —É—Å–ª–æ–≤–∏—è, —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è)
üéØ –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–∞–∫–æ–π?
–°—Ü–µ–Ω–∞—Ä–∏–π	–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è
SELECT –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ–¥–Ω—É —Å—Ç—Ä–æ–∫—É	–ù–µ—è–≤–Ω—ã–π –∫—É—Ä—Å–æ—Ä (SELECT INTO)
–ù—É–∂–Ω–æ –ø—Ä–æ–π—Ç–∏ –ø–æ –≤—Å–µ–º —Å—Ç—Ä–æ–∫–∞–º	–Ø–≤–Ω—ã–π –∫—É—Ä—Å–æ—Ä
–¢—Ä–µ–±—É–µ—Ç—Å—è –ª–æ–≥–∏–∫–∞ –ø–æ –∫–∞–∂–¥–æ–π —Å—Ç—Ä–æ–∫–µ	–Ø–≤–Ω—ã–π –∫—É—Ä—Å–æ—Ä
–ë–æ–ª—å—à–æ–π –æ–±—ä—ë–º –¥–∞–Ω–Ω—ã—Ö	–Ø–≤–Ω—ã–π –∫—É—Ä—Å–æ—Ä + BULK COLLECT (–¥–ª—è —É—Å–∫–æ—Ä–µ–Ω–∏—è)