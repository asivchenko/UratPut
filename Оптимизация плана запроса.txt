–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è "—Ç—è–∂—ë–ª—ã—Ö" SQL-–∑–∞–ø—Ä–æ—Å–æ–≤ –≤ Oracle ‚Äî —ç—Ç–æ –æ–¥–Ω–∞ –∏–∑ –∫–ª—é—á–µ–≤—ã—Ö –∑–∞–¥–∞—á —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞ –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∞. –í–æ—Ç —Å–∏—Å—Ç–µ–º–Ω—ã–π –ø–æ–¥—Ö–æ–¥, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–∏–º–µ–Ω—è—é—Ç –æ–ø—ã—Ç–Ω—ã–µ Oracle-—Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç—ã –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –º–µ–¥–ª–µ–Ω–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤.
üß≠ 1. –ê–Ω–∞–ª–∏–∑ –ø–ª–∞–Ω–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–ø—Ä–æ—Å–∞ (Execution Plan)
‚úÖ –ö–∞–∫ –ø–æ–ª—É—á–∏—Ç—å:

EXPLAIN PLAN FOR
<–≤–∞—à –∑–∞–ø—Ä–æ—Å>;

SELECT * FROM TABLE(DBMS_XPLAN.DISPLAY);

üîπ –õ—É—á—à–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:

SELECT * FROM TABLE(DBMS_XPLAN.DISPLAY_CURSOR(NULL, NULL, 'ALLSTATS LAST'));

    –≠—Ç–æ –ø–æ–∫–∞–∂–µ—Ç —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏–π –ø–ª–∞–Ω –ø–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–ø—Ä–æ—Å–∞, –≤–∫–ª—é—á–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É (rows, cost, bytes –∏ —Ç.–¥.)

üîç 2. –¢–∏–ø–∏—á–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã
–ü—Ä–æ–±–ª–µ–º–∞	–ö–∞–∫ –∑–∞–º–µ—á–∞—Ç—å –≤ –ø–ª–∞–Ω–µ	–í–æ–∑–º–æ–∂–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è
–ü–æ–ª–Ω—ã–π –ø—Ä–æ—Å–º–æ—Ç—Ä —Ç–∞–±–ª–∏—Ü—ã (FULL TABLE SCAN)	TABLE ACCESS FULL	–î–æ–±–∞–≤–∏—Ç—å –∏–Ω–¥–µ–∫—Å –∏–ª–∏ –ø–µ—Ä–µ—Å–º–æ—Ç—Ä–µ—Ç—å WHERE
–ö–∞—Ä–¥–∏–Ω–∞–ª—å–Ω–æ—Å—Ç—å –Ω–µ–≤–µ—Ä–Ω–∞	–û–∂–∏–¥–∞–ª–∏ 10 —Å—Ç—Ä–æ–∫, –ø–æ–ª—É—á–∏–ª–∏ 1M	–û–±–Ω–æ–≤–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É (DBMS_STATS)
–ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –≤–ª–æ–∂–µ–Ω–Ω—ã–µ NESTED LOOPS	NESTED LOOPS + –±–æ–ª—å—à–∏–µ –æ–±—ä–µ–º—ã	–ó–∞–º–µ–Ω–∏—Ç—å –Ω–∞ HASH JOIN, –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ
VIEW —Å–æ —Å–ª–æ–∂–Ω—ã–º –ø–æ–¥–∑–∞–ø—Ä–æ—Å–æ–º	VIEW –≤ –ø–ª–∞–Ω–µ	–†–∞—Å–ø—É—Å—Ç–∏—Ç—å VIEW –∏ –≤–Ω–µ–¥—Ä–∏—Ç—å –ø–æ–¥–∑–∞–ø—Ä–æ—Å —è–≤–Ω–æ
SORT –æ–ø–µ—Ä–∞—Ü–∏–π –º–Ω–æ–≥–æ	SORT ORDER BY, SORT AGGREGATE	–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –Ω—É–∂–Ω–∞
üß™ 3. –°–±–æ—Ä —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏

–ï—Å–ª–∏ –ø–ª–∞–Ω –Ω–µ–∞–¥–µ–∫–≤–∞—Ç–µ–Ω:

BEGIN
  DBMS_STATS.GATHER_TABLE_STATS(ownname => 'SCHEMA', tabname => 'TABLE_NAME');
END;

üß† 4. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏–Ω–¥–µ–∫—Å–æ–≤

    –ï—Å—Ç—å –ª–∏ –Ω—É–∂–Ω—ã–µ –∏–Ω–¥–µ–∫—Å—ã?

    –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –ª–∏ –∑–∞–ø—Ä–æ—Å –ø–æ–∫—Ä—ã–≤–∞—é—â–∏–π –∏–Ω–¥–µ–∫—Å?

    –ù–µ—Ç –ª–∏ –Ω–∏–∑–∫–æ—Å–µ–ª–µ–∫—Ç–∏–≤–Ω—ã—Ö –∏–Ω–¥–µ–∫—Å–æ–≤?

üöÄ 5. –•–∏–Ω—Ç—ã (Hints) ‚Äî –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏

SELECT /*+ INDEX(e emp_salary_ix) */ * FROM employees e WHERE salary > 5000;

–¢–∞–∫–∂–µ:

    /*+ PARALLEL */

    /*+ LEADING */

    /*+ USE_HASH */ / USE_NL

üß± 6. –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø–æ–¥–∑–∞–ø—Ä–æ—Å–æ–≤ –∏ JOIN'–æ–≤

    –ó–∞–º–µ–Ω—è—Ç—å –∫–æ—Ä—Ä–µ–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–æ–¥–∑–∞–ø—Ä–æ—Å—ã –Ω–∞ JOIN

    –ü–µ—Ä–µ–ø–∏—Å–∞—Ç—å EXISTS/IN —Å —É—á—ë—Ç–æ–º –¥–∞–Ω–Ω—ã—Ö

    –£–¥–∞–ª–∏—Ç—å –ª–∏—à–Ω–∏–µ DISTINCT, ORDER BY –≤–Ω—É—Ç—Ä–∏ –ø–æ–¥–∑–∞–ø—Ä–æ—Å–æ–≤

üì¶ 7. –ü—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ AWR

–ï—Å–ª–∏ –µ—Å—Ç—å –¥–æ—Å—Ç—É–ø:

-- –ù–∞–π—Ç–∏ "—Ç—è–∂—ë–ª—ã–µ" –∑–∞–ø—Ä–æ—Å—ã –ø–æ CPU –∏ IO:
SELECT * FROM dba_hist_sqlstat WHERE sql_id = '...';

–ò–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å SQL Monitor, –µ—Å–ª–∏ –∑–∞–ø—Ä–æ—Å –¥–ª–∏—Ç—Å—è –±–æ–ª–µ–µ 5 —Å–µ–∫ + PARALLEL/GATHER_PLAN_STATISTICS.
üí° –ü—Ä–∏–º–µ—Ä—ã —É–ª—É—á—à–µ–Ω–∏—è
–ë—ã–ª–æ (–º–µ–¥–ª–µ–Ω–Ω–æ)	–°—Ç–∞–ª–æ (–±—ã—Å—Ç—Ä–æ)
SELECT * FROM A WHERE id IN (SELECT id FROM B)	SELECT A.* FROM A JOIN B USING(id)
ORDER BY + ROWNUM	FETCH FIRST 10 ROWS ONLY
–ù–µ—Ç –∏–Ω–¥–µ–∫—Å–∞ –Ω–∞ status, –Ω–æ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –Ω–µ–º—É	–î–æ–±–∞–≤–ª–µ–Ω –∏–Ω–¥–µ–∫—Å CREATE INDEX ... ON table(status)
üìå –ó–∞–∫–ª—é—á–µ–Ω–∏–µ: —á–µ–∫–ª–∏—Å—Ç

‚úÖ –ü—Ä–æ–≤–µ—Ä–∏–ª –ø–ª–∞–Ω –∑–∞–ø—Ä–æ—Å–∞
‚úÖ –û–±–Ω–æ–≤–∏–ª —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
‚úÖ –û—Ü–µ–Ω–∏–ª —Ä–∞–∑–º–µ—Ä —Ç–∞–±–ª–∏—Ü –∏ –æ–±—ä—ë–º—ã –¥–∞–Ω–Ω—ã—Ö
‚úÖ –ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–ª –∏–Ω–¥–µ–∫—Å—ã
‚úÖ –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–ª JOIN, WHERE, –ø–æ–¥–∑–∞–ø—Ä–æ—Å—ã
‚úÖ –ü—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ ‚Äî –¥–æ–±–∞–≤–∏–ª HINTS
‚úÖ –°—Ä–∞–≤–Ω–∏–ª —Ä–µ–∑—É–ª—å—Ç–∞—Ç –¥–æ –∏ –ø–æ—Å–ª–µ