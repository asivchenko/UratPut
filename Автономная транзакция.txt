Автономная транзакция в Oracle — это специальный тип транзакции, которая запускается внутри основной (главной) транзакции, но существует независимо от неё. Она может быть зафиксирована (COMMIT) или отменена (ROLLBACK), не влияя на основную транзакцию.
Основные особенности:

    Выполняется независимо от основной транзакции.

    Может быть зафиксирована, даже если основная транзакция позже будет отменена.

    Используется, например, для логирования или аудита.

Пример на PL/SQL

CREATE OR REPLACE PROCEDURE log_action(p_msg VARCHAR2) IS
  PRAGMA AUTONOMOUS_TRANSACTION;
BEGIN
  INSERT INTO log_table (log_date, message)
  VALUES (SYSDATE, p_msg);

  COMMIT; -- Обязательно, иначе запись не сохранится
END;

Использование:

BEGIN
  -- Основная логика
  UPDATE accounts SET balance = balance - 100 WHERE id = 1;

  -- Логирование
  log_action('Списано 100 с аккаунта 1');

  -- Ошибка или отмена основной транзакции
  ROLLBACK;
END;

В этом примере лог всё равно сохранится, даже если основная транзакция будет отменена.
